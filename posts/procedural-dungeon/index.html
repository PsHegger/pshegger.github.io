<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  





  
  
  
    
    
  





  



  
  

<link rel="stylesheet" href="https://pshegger.github.io/main.min.css" />
  
<meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  

<title>Procedural Dungeon Generation</title>


<meta name="author" content="pshegger">

<meta name="description" content="Procedural generation is the key to writing games with endless content. In this article I show you how I generate a dungeon that can be later used in a game.">
<link rel="canonical" href="https://pshegger.github.io/posts/procedural-dungeon/">
<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Procedural Dungeon Generation">
<meta property="og:description" content="Procedural generation is the key to writing games with endless content. In this article I show you how I generate a dungeon that can be later used in a game.">
<meta property="og:url" content="https://pshegger.github.io/posts/procedural-dungeon/">
<meta property="article:published_time" content="2022-03-10T00:00:00+01:00">
  <meta property="article:modified_time" content="2022-03-10T00:00:00+01:00">
  






  <meta name="twitter:site" content="pshegger">


  <meta name="twitter:creator" content="pshegger">

<meta name="twitter:title" content="Procedural Dungeon Generation">
<meta name="twitter:description" content="Procedural generation is the key to writing games with endless content. In this article I show you how I generate a dungeon that can be later used in a game.">



  <meta name="twitter:card" content="summary">






<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Person",
      "@id": "https://pshegger.github.io/#/schema/person/1",
      "name":  null ,
      "url": "https://pshegger.github.io/",
      "image": {
        "@type": "ImageObject",
        "@id": "https://pshegger.github.io/#/schema/image/1",
        "url": "https://pshegger.github.io/\u003cnil\u003e",
        "width": null ,
        "height": null ,
        "caption":  null 
      }
    },
    {
      "@type": "WebSite",
      "@id": "https://pshegger.github.io/#/schema/website/1",
      "url": "https://pshegger.github.io/",
      "name": "pshegger",
      "description":  null ,
      "publisher": {
        "@id": "https://pshegger.github.io/#/schema/person/1"
      }
    },
    {
      "@type": "WebPage",
      "@id": "https://pshegger.github.io/posts/procedural-dungeon/",
      "url": "https://pshegger.github.io/posts/procedural-dungeon/",
      "name": "Procedural Dungeon Generation",
      "description": "Procedural generation is the key to writing games with endless content. In this article I show you how I generate a dungeon that can be later used in a game.",
      "isPartOf": {
        "@id": "https://pshegger.github.io/#/schema/website/1"
      },
      "about": {
        "@id": "https://pshegger.github.io/#/schema/person/1"
      },
      "datePublished": "2022-03-10T00:00:00+01:00",
      "dateModified": "2022-03-10T00:00:00+01:00",
      "breadcrumb": {
        "@id": "https://pshegger.github.io/posts/procedural-dungeon/#/schema/breadcrumb/1"
      },
      "primaryImageOfPage": {
        "@id": "https://pshegger.github.io/posts/procedural-dungeon/#/schema/image/2"
      },
      "inLanguage":  null ,
      "potentialAction": [{
        "@type": "ReadAction", "target": ["https://pshegger.github.io/posts/procedural-dungeon/"]
      }]
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://pshegger.github.io/posts/procedural-dungeon/#/schema/breadcrumb/1",
      "name": "Breadcrumbs",
      "itemListElement": [{
        "@type": "ListItem",
        "position":  1 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://pshegger.github.io/",
          "url": "https://pshegger.github.io/",
          "name": "Home"
          }
        },{
        "@type": "ListItem",
        "position":  2 ,
        "item": {
          "@type": "WebPage",
          "@id": "https://pshegger.github.io/posts/",
          "url": "https://pshegger.github.io/posts/",
          "name": "Posts"
          }
        },{
        "@type": "ListItem",
        "position":  3 ,
        "item": {
          "@id": "https://pshegger.github.io/posts/procedural-dungeon/"
          }
        }]
    },
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Article",
          "@id": "https://pshegger.github.io/#/schema/article/1",
          "headline": "Procedural Dungeon Generation",
          "description": "Procedural generation is the key to writing games with endless content. In this article I show you how I generate a dungeon that can be later used in a game.",
          "isPartOf": {
            "@id": "https://pshegger.github.io/posts/procedural-dungeon/"
          },
          "mainEntityOfPage": {
            "@id": "https://pshegger.github.io/posts/procedural-dungeon/"
          },
          "datePublished": "2022-03-10T00:00:00+01:00",
          "dateModified": "2022-03-10T00:00:00+01:00",
          "author": {
            "@id": "https://pshegger.github.io/#/schema/person/1"
          },          
          "publisher": {
            "@id": "https://pshegger.github.io/#/schema/person/1"
          },
          "image": {
            "@id": "https://pshegger.github.io/posts/procedural-dungeon/#/schema/image/2"
          }
        }
      ]
    },{
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "ImageObject",
          "@id": "https://pshegger.github.io/posts/procedural-dungeon/#/schema/image/2",
          "url":  null ,
          "contentUrl":  null ,
          "caption": "Procedural Dungeon Generation"
        }
      ]
    }
  ]
}
</script>
  

  

</head><body>
    <header class="container">
  <nav class="main-nav" id="js-navbar">
    <a class="logo" href="https://pshegger.github.io/">pshegger</a>
    <ul class="menu" id="js-menu">
      
      
      
        <li class="menu-item">
          <a href="/about/" class="menu-link">About</a>
        </li>
      
      
      
        <li class="menu-item">
          <a href="/posts/" class="menu-link">All Posts</a>
        </li>
      
      
      
      <li class="menu-item">
        <span class="menu-link">Explore<span class="drop-icon">▾</span></span>
        <ul class="sub-menu">
          
            <li class="menu-item">
              <a href="/categories/" class="menu-link">Categories</a>                  
            </li>
          
            <li class="menu-item">
              <a href="/tags/" class="menu-link">Tags</a>                  
            </li>
          
            <li class="menu-item">
              <a href="/series/" class="menu-link">Series</a>                  
            </li>
          
        </ul>
      </li>
      
      
      <li class="menu-item--align">
        <div class="switch">
          <input class="switch-input" type="checkbox" id="themeSwitch">
          <label aria-hidden="true" class="switch-label" for="themeSwitch">On</label>
          <div aria-hidden="true" class="switch-marker"></div>
        </div>
      </li>
    </ul>
    <span class="nav-toggle" id="js-navbar-toggle">
      <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="30" height="30" fill="var(--color-contrast-high)"><rect y="11" width="24" height="2" rx="1"/><rect y="4" width="24" height="2" rx="1"/><rect y="18" width="24" height="2" rx="1"/></svg>
    </span>
  </nav>
</header><main class="section">
<div class="container">
  <section class="page-header">
    <h1 class="page-header-title">Procedural Dungeon Generation</h1>
    <div class="post-list-meta">
      <div class="post-list-dates">Mar 10, 2022&nbsp;&middot;&nbsp;8 min.</div>
      
      <div class="post-list-categories">
        
          <a href="https://pshegger.github.io/categories/gamedev/">gamedev</a>
        
      </div>
      
      
    </div>
    <p class="page-header-desc">Procedural generation is the key to writing games with endless content. In this article I show you how I generate a dungeon that can be later used in a game.</p>
    <div class="single-terms">
      
      
      <a class="term" href="https://pshegger.github.io/tags/kotlin/">kotlin</a></li>
      
      <a class="term" href="https://pshegger.github.io/tags/procgen/">procgen</a></li>
      
      <a class="term" href="https://pshegger.github.io/tags/gamedev/">gamedev</a></li>
      
      
    </div>
  </section>
</div>
<div class="single-container-post">
  

  <aside class="toc">
    <div id="js-toc-toggle">
      <h2 class="toc-header">Table of Contents</h2>
      <span class="toc-drop-icon">&blacktriangledown;</span>
    </div>
    <div id="js-toc-contents" class="toc-contents"><nav id="TableOfContents">
  <ul>
    <li><a href="#steps">Steps</a>
      <ul>
        <li><a href="#1-generating-rooms">1. Generating rooms</a></li>
        <li><a href="#2-finding-room-placement">2. Finding room placement</a></li>
        <li><a href="#3-selecting-rooms-to-keep">3. Selecting rooms to keep</a></li>
        <li><a href="#4-generating-a-spanning-tree-for-the-rooms">4. Generating a spanning tree for the rooms</a></li>
        <li><a href="#5-selecting-the-entrance">5. Selecting the entrance</a></li>
        <li><a href="#6-quest-room-selection">6. Quest room selection</a></li>
        <li><a href="#7-generating-corridors">7. Generating corridors</a></li>
        <li><a href="#8-converting-to-a-tilemap">8. Converting to a tilemap</a></li>
      </ul>
    </li>
    <li><a href="#demo">Demo</a></li>
    <li><a href="#final-thoughts">Final Thoughts</a></li>
  </ul>
</nav></div>
  </aside>

  <div class="single-post-contents">
    <div class="single-feature-img">



  

</div>
    <article class="markdown">
        <p>Procedural generation is incredible. It is the key to writing games with endless content. Without it, <a href="https://www.minecraft.net/" target="_blank" rel="noopener">Minecraft</a> couldn’t have (nearly) infinite worlds with infinite terrain. <a href="https://spelunkyworld.com/" target="_blank" rel="noopener">Spelunky</a> would only contain a few rooms, and we could learn the layout and enemy placement instead of learning the game mechanics. These are only a few examples, but there are a lot of games that use this mechanic for generating content.</p>
<p>In this article, I’d like to show you my way of generating a random dungeon that can be later used in a game.</p>
<h2 id="steps">Steps<a href="#steps">
    <svg role="img" aria-labelledby="steps-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="steps-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h2><p>The process consists of multiple steps, each one starting after the previous finished. Let’s have a look at them one-by-one and see how they work.</p>
<h3 id="1-generating-rooms">1. Generating rooms<a href="#1-generating-rooms">
    <svg role="img" aria-labelledby="1-generating-rooms-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="1-generating-rooms-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h3><p>This is the beginning of everything. We’re generating multiple random-sized rooms that later will be moved to their correct place and filtered.</p>
<p>For each room, we will generate a random width and height. To control the sizes, I introduced a minimum and maximum size setting. When we have the size of the room, we have to place them somewhere. For now, we will put all of them in the middle of our map and will later find their correct position.</p>
<p>I also needed some way of knowing when to stop generating new rooms. For this, I introduced a new setting that tells us the minimum area of the generated rooms. With this, we can stop generating new ones once the sum of their area reaches our given minimum.</p>


  <span class="code-language">kotlin</span><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">generateRooms</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (rooms.sumOf { <span style="color:#66d9ef">it</span>.room.area() } &lt; settings.minimumArea) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> width = rng.nextInt(settings.maxSize - settings.minSize + <span style="color:#ae81ff">1</span>) + settings.minSize
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> height = rng.nextInt(settings.maxSize - settings.minSize + <span style="color:#ae81ff">1</span>) + settings.minSize
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> left = (<span style="color:#66d9ef">this</span>.width - width) / <span style="color:#ae81ff">2f</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> top = (<span style="color:#66d9ef">this</span>.height - height) / <span style="color:#ae81ff">2f</span>
</span></span><span style="display:flex;"><span>        rooms.add(RoomState(Room(Vector(left, top), width, height), <span style="color:#a6e22e">RoomState</span>.<span style="color:#a6e22e">State</span>.Generated))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="2-finding-room-placement">2. Finding room placement<a href="#2-finding-room-placement">
    <svg role="img" aria-labelledby="2-finding-room-placement-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="2-finding-room-placement-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h3><p>First, I select a random room, and we mark that as placed. After that, I iterate over all remaining ones and move them toward a random direction until they no longer intersect with any of the already placed rooms. I also added a margin for this to not end up with rooms that are too close to each other.</p>


  <span class="code-language">kotlin</span><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">moveRooms</span>() {
</span></span><span style="display:flex;"><span>    rooms[rng.nextInt(rooms.size)].state = <span style="color:#a6e22e">RoomState</span>.<span style="color:#a6e22e">State</span>.Placed
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (rooms.any { <span style="color:#66d9ef">it</span>.state <span style="color:#f92672">==</span> <span style="color:#a6e22e">RoomState</span>.<span style="color:#a6e22e">State</span>.Generated }) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> movingRoom = rooms.first { <span style="color:#66d9ef">it</span>.state <span style="color:#f92672">==</span> <span style="color:#a6e22e">RoomState</span>.<span style="color:#a6e22e">State</span>.Generated }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> direction = rng.nextDouble() * <span style="color:#ae81ff">2</span> * <span style="color:#a6e22e">Math</span>.PI
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> moveVector = Vector(cos(direction), sin(direction))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> finalPlace = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> (!finalPlace) {
</span></span><span style="display:flex;"><span>            movingRoom.room.topLeft = movingRoom.room.topLeft + moveVector
</span></span><span style="display:flex;"><span>            finalPlace = rooms
</span></span><span style="display:flex;"><span>                .filter { <span style="color:#66d9ef">it</span>.state <span style="color:#f92672">==</span> <span style="color:#a6e22e">RoomState</span>.<span style="color:#a6e22e">State</span>.Placed }
</span></span><span style="display:flex;"><span>                .none { <span style="color:#66d9ef">it</span>.room.intersects(movingRoom.room, settings.roomMargin) }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        movingRoom.state = <span style="color:#a6e22e">RoomState</span>.<span style="color:#a6e22e">State</span>.Placed
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="3-selecting-rooms-to-keep">3. Selecting rooms to keep<a href="#3-selecting-rooms-to-keep">
    <svg role="img" aria-labelledby="3-selecting-rooms-to-keep-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="3-selecting-rooms-to-keep-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h3><p>We have our rooms in the correct position now, but we still have too many of them. Let’s solve this issue by selecting a few to keep and removing the unnecessary ones. For this, I will calculate the average area of the rooms and only keep those larger than the average times a variable ratio.</p>


  <span class="code-language">kotlin</span><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">selectRooms</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> minArea = rooms.map { <span style="color:#66d9ef">it</span>.room.area() }.average() * settings.finalAreaRatio
</span></span><span style="display:flex;"><span>    rooms.removeIf { <span style="color:#66d9ef">it</span>.room.area() &lt; minArea }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="4-generating-a-spanning-tree-for-the-rooms">4. Generating a spanning tree for the rooms<a href="#4-generating-a-spanning-tree-for-the-rooms">
    <svg role="img" aria-labelledby="4-generating-a-spanning-tree-for-the-rooms-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="4-generating-a-spanning-tree-for-the-rooms-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h3><p>Next, we will generate a spanning tree of our rooms. We need this to connect our rooms with as few routes as possible.</p>
<p>To achieve this, we need a simple graph class capable of storing our edges and calculating the shortest path between two nodes (I’m using <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" target="_blank" rel="noopener">Dijkstra’s algorithm</a> for this).</p>
<p>As a start, I calculate all possible edges between our rooms. We will have a complete graph with this, and we can now use that to calculate the spanning tree. We will calculate that by adding new edges until their number is less than the number of selected rooms minus one. We consider an edge a new one if there is currently no path between its two ends.</p>


  <span class="code-language">kotlin</span><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">generateSpanningTree</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> graph = Graph&lt;Room&gt;(emptyList())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> allEdges = selectedRooms.mapIndexed { i, x <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>        selectedRooms.mapIndexed { j, y <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (i &lt; j) Pair(x.room, y.room) <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>        }.filterNotNull()
</span></span><span style="display:flex;"><span>    }.flatten()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (graph.edges.size &lt; selectedRooms.size - <span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        allEdges
</span></span><span style="display:flex;"><span>            .filterNot { graph.isRouteAvailable(<span style="color:#66d9ef">it</span>.first, <span style="color:#66d9ef">it</span>.second) }
</span></span><span style="display:flex;"><span>            .sortedBy { <span style="color:#66d9ef">it</span>.first.center.distance(<span style="color:#66d9ef">it</span>.second.center) }
</span></span><span style="display:flex;"><span>            .take(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>            .forEach { graph.addEdge(<span style="color:#a6e22e">Graph</span>.Edge(<span style="color:#66d9ef">it</span>.first, <span style="color:#66d9ef">it</span>.second)) }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="5-selecting-the-entrance">5. Selecting the entrance<a href="#5-selecting-the-entrance">
    <svg role="img" aria-labelledby="5-selecting-the-entrance-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="5-selecting-the-entrance-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h3><p>With the spanning tree generated, we now have the basic structure of our dungeon. For the next step, let’s choose the room where the whole adventure begins. For this, I wanted to find the farthest room away from any leaf node.</p>


  <span class="code-language">kotlin</span><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">selectEntrance</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> graph = Graph(edges)
</span></span><span style="display:flex;"><span>    selectedRooms.forEach { <span style="color:#66d9ef">it</span>.room.type = <span style="color:#a6e22e">Room</span>.<span style="color:#a6e22e">RoomType</span>.Room }
</span></span><span style="display:flex;"><span>    selectedRooms.maxByOrNull { graph.branchDistance(<span style="color:#66d9ef">it</span>.room) }
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">?.</span>let { <span style="color:#66d9ef">it</span>.room.type = <span style="color:#a6e22e">Room</span>.<span style="color:#a6e22e">RoomType</span>.Entrance }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">fun</span> &lt;<span style="color:#a6e22e">T</span>&gt; <span style="color:#a6e22e">Graph</span>&lt;T&gt;.branchDistance(n: T, prev: T? = <span style="color:#66d9ef">null</span>): Int {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> neighborCount = neighbors(n).size
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> ((prev <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> neighborCount &gt; <span style="color:#ae81ff">1</span>) <span style="color:#f92672">||</span> neighborCount &gt; <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> next = neighbors(n).filterNot { <span style="color:#66d9ef">it</span>.otherEnd(n) <span style="color:#f92672">==</span> prev }.firstOrNull()<span style="color:#f92672">?.</span>otherEnd(n)
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">?:</span> <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> branchDistance(next, n) + <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="6-quest-room-selection">6. Quest room selection<a href="#6-quest-room-selection">
    <svg role="img" aria-labelledby="6-quest-room-selection-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="6-quest-room-selection-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h3><p>For the next step, I’d like to find the room that will contain the quest objective. I thought that this room should be one of the leaves (that’s why I chose the farthest room as the entrance in the previous step), and it should be far from the entrance.</p>
<p>To make it more interesting, I decided to not simply use the farthest room from the entrance but to select a random one, weighted by its distance. I also introduced a factor that can be modified to specify how important the distance is.</p>


  <span class="code-language">kotlin</span><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">selectQuestObjective</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> graph = Graph(edges)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> entrance = selectedRooms.first { <span style="color:#66d9ef">it</span>.room.type <span style="color:#f92672">==</span> <span style="color:#a6e22e">Room</span>.<span style="color:#a6e22e">RoomType</span>.Entrance }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> distances = mutableListOf&lt;Pair&lt;RoomState, Int&gt;&gt;()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    selectedRooms
</span></span><span style="display:flex;"><span>        .filter { <span style="color:#66d9ef">it</span>.room.type <span style="color:#f92672">==</span> <span style="color:#a6e22e">Room</span>.<span style="color:#a6e22e">RoomType</span>.Room <span style="color:#f92672">&amp;&amp;</span> graph.neighbors(<span style="color:#66d9ef">it</span>.room).size <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> }
</span></span><span style="display:flex;"><span>        .forEach { roomState <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">val</span> distance = graph.shortestPath(entrance.room, roomState.room)
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">?.</span>let { <span style="color:#66d9ef">it</span>.size - <span style="color:#ae81ff">1</span> } <span style="color:#f92672">?:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">val</span> weight = settings.questObjectiveDistanceFactor.toDouble()
</span></span><span style="display:flex;"><span>                .pow(distance.toDouble()).roundToInt()
</span></span><span style="display:flex;"><span>            distances.add(Pair(roomState, weight))
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> questObjective = distances.weightedRandom(rng)
</span></span><span style="display:flex;"><span>    selectedRooms
</span></span><span style="display:flex;"><span>        .first { <span style="color:#66d9ef">it</span> <span style="color:#f92672">==</span> questObjective}
</span></span><span style="display:flex;"><span>        .room.type = <span style="color:#a6e22e">Room</span>.<span style="color:#a6e22e">RoomType</span>.QuestObjective
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="7-generating-corridors">7. Generating corridors<a href="#7-generating-corridors">
    <svg role="img" aria-labelledby="7-generating-corridors-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="7-generating-corridors-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h3><p>Currently, the rooms are not connected; we just have a graph telling us which of them should be neighbors. To change this, let’s generate some corridors between them.</p>
<p>I iterated over the rooms and checked their neighbors one by one. For each neighbor, I had to find the direction they were in relative to the current room. After that, I knew which sides of the rooms were facing each other so I could check if there were any overlapping regions of those sides. I also added some margin to prevent the corridors from being generated in the room&rsquo;s corner.</p>
<p>At this point, there were two possibilities: there is an overlap where I can put the corridor (red on the image), or there isn’t (blue on the image).</p>
<p><img src="/img/procedural-dungeon/coridor_types.png"
	alt="/img/procedural-dungeon/coridor_types.png" 
	class="single-post-image" 
	loading="lazy"
	decoding="async"
	></p>
<p>The first one is simple, just select a suitable location and add a corridor there.</p>
<p>The second one is more problematic. In this case, I had to find the side closest to the current room (top, in the example above) and choose a point there. Then I chose a point on the current room and added two separate corridors.</p>
<h3 id="8-converting-to-a-tilemap">8. Converting to a tilemap<a href="#8-converting-to-a-tilemap">
    <svg role="img" aria-labelledby="8-converting-to-a-tilemap-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="8-converting-to-a-tilemap-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h3><p>Now that we have everything generated, there’s only one thing left to do. We should convert our rooms and corridors into a more usable format.</p>
<p>First, I had to find the size of the map. This was an easy task, I just had to find the minimum and the maximum of every room&rsquo;s x and y coordinate. Once I got that, I split the whole area into squares and looped over them. For every square, I checked if it intersects with any room or corridor, and if there was an intersection, I set the tile type accordingly.</p>


  <span class="code-language">kotlin</span><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">generateTileMap</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> minX = rooms.minOf { <span style="color:#66d9ef">it</span>.room.left }.roundToInt()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> maxX = rooms.maxOf { <span style="color:#66d9ef">it</span>.room.right }.roundToInt()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> minY = rooms.minOf { <span style="color:#66d9ef">it</span>.room.top }.roundToInt()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> maxY = rooms.maxOf { <span style="color:#66d9ef">it</span>.room.bottom }.roundToInt()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> tileMap = TileMap(maxX - minX, maxY - minY)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (i <span style="color:#66d9ef">in</span> <span style="color:#ae81ff">0</span> until (tileMap.width * tileMap.height)) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> x = i % tileMap.width
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> y = i / tileMap.width
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> tileLeft = (x + minX).toFloat()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> tileTop = (y + minY).toFloat()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> tileRect = RectF(tileLeft, tileTop, tileLeft + <span style="color:#ae81ff">1</span>, tileTop + <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> intersectedRoom = rooms.firstOrNull { <span style="color:#66d9ef">it</span>.room.getRect().intersect(tileRect) }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> intersectedCorridor = corridors.firstOrNull { <span style="color:#66d9ef">it</span>.getRect().intersect(tileRect) }
</span></span><span style="display:flex;"><span>        tileMap[x, y] = <span style="color:#66d9ef">when</span> {
</span></span><span style="display:flex;"><span>            intersectedRoom <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">when</span> (intersectedRoom.room.type) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Room</span>.<span style="color:#a6e22e">RoomType</span>.Room <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">TileMap</span>.<span style="color:#a6e22e">TileType</span>.Room
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Room</span>.<span style="color:#a6e22e">RoomType</span>.Entrance <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">TileMap</span>.<span style="color:#a6e22e">TileType</span>.StartRoom
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Room</span>.<span style="color:#a6e22e">RoomType</span>.QuestObjective <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">TileMap</span>.<span style="color:#a6e22e">TileType</span>.QuestRoom
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            intersectedCorridor <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">TileMap</span>.<span style="color:#a6e22e">TileType</span>.Corridor
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">TileMap</span>.<span style="color:#a6e22e">TileType</span>.Void
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="demo">Demo<a href="#demo">
    <svg role="img" aria-labelledby="demo-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="demo-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h2><p><img src="/img/procedural-dungeon/dungeon.gif"
	alt="/img/procedural-dungeon/dungeon.gif" 
	class="single-post-image" 
	loading="lazy"
	decoding="async"
	></p>
<h2 id="final-thoughts">Final Thoughts<a href="#final-thoughts">
    <svg role="img" aria-labelledby="final-thoughts-IconTitle" fill="var(--color-primary)" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg">
      <title id="final-thoughts-IconTitle">Link to this heading</title>
      <path d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg>
  </a>
</h2><p>Now that we’re done with the generation, there are a few things I wanted to mention.</p>
<p>You may have seen that I used a variable called <code>rng</code> multiple times during the examples. This is, of course, a random number generator that is initialized at the beginning and then used for every step. This way, we can set a seed to the generator, and we will always get the same end result.</p>
<p>The source code for this article is available on <a href="https://github.com/PsHegger/playground/blob/master/app/src/main/java/pshegger/github/io/playground/gamedev/algorithms/dungeon/DungeonGenerator.kt" target="_blank" rel="noopener">GitHub</a>, but if you check it, you may see that it differs from the ones presented here. This is because that code is structured in a way that makes it easier to visualize the process, but that doesn’t change the theory behind this whole process, the end result will be the same in both versions.</p>

    </article>
    <aside>
      <div class="single-terms">
        
          
          <a class="term" href="https://pshegger.github.io/tags/kotlin/">kotlin</a></li>
          
          <a class="term" href="https://pshegger.github.io/tags/procgen/">procgen</a></li>
          
          <a class="term" href="https://pshegger.github.io/tags/gamedev/">gamedev</a></li>
          
        
      </div>
      
  
  
  

  <section>
    <h2>Share</h2>
    <div class="social-links">
      <ul class="social-icons--share">
        
        
        <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fpshegger.github.io%2fposts%2fprocedural-dungeon%2f&amp;text=Procedural%20Dungeon%20Generation" target="_blank" rel="noopener" aria-label="Share on Twitter" class="social-btn twitter">
          <li><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-twitter" width="24" height="24" viewBox="0 0 384 312" fill="var(--color-primary)"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5 0-78.8 35.3-78.8 78.8 0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3-6.7 11.6-10.6 25.2-10.6 39.6 0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1 0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4 0-12.6-.4-18.8-1.1 34.9 22.4 76.3 35.4 120.8 35.4 144.9 0 224.1-120 224.1-224.1 0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg></li>
        </a>
        
        
        
        <a href="https://www.reddit.com/submit?url=https%3a%2f%2fpshegger.github.io%2fposts%2fprocedural-dungeon%2f" target="_blank" rel="noopener" aria-label="Share on Reddit" class="social-btn reddit">
          <li><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-reddit" width="24" height="24" viewBox="0 0 24 24" fill="var(--color-primary)"><path d="M24 11.779c0-1.459-1.192-2.645-2.657-2.645-.715 0-1.363.286-1.84.746-1.81-1.191-4.259-1.949-6.971-2.046l1.483-4.669 4.016.941-.006.058c0 1.193.975 2.163 2.174 2.163 1.198 0 2.172-.97 2.172-2.163s-.975-2.164-2.172-2.164c-.92 0-1.704.574-2.021 1.379l-4.329-1.015c-.189-.046-.381.063-.44.249l-1.654 5.207c-2.838.034-5.409.798-7.3 2.025-.474-.438-1.103-.712-1.799-.712-1.465 0-2.656 1.187-2.656 2.646 0 .97.533 1.811 1.317 2.271-.052.282-.086.567-.086.857 0 3.911 4.808 7.093 10.719 7.093s10.72-3.182 10.72-7.093c0-.274-.029-.544-.075-.81.832-.447 1.405-1.312 1.405-2.318zm-17.224 1.816c0-.868.71-1.575 1.582-1.575.872 0 1.581.707 1.581 1.575s-.709 1.574-1.581 1.574-1.582-.706-1.582-1.574zm9.061 4.669c-.797.793-2.048 1.179-3.824 1.179l-.013-.003-.013.003c-1.777 0-3.028-.386-3.824-1.179-.145-.144-.145-.379 0-.523.145-.145.381-.145.526 0 .65.647 1.729.961 3.298.961l.013.003.013-.003c1.569 0 2.648-.315 3.298-.962.145-.145.381-.144.526 0 .145.145.145.379 0 .524zm-.189-3.095c-.872 0-1.581-.706-1.581-1.574 0-.868.709-1.575 1.581-1.575s1.581.707 1.581 1.575-.709 1.574-1.581 1.574z"/></svg></li>
        </a>
        
        
                
        <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fpshegger.github.io%2fposts%2fprocedural-dungeon%2f" target="_blank" rel="noopener" aria-label="Share on Facebook" class="social-btn facebook">
          <li><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-facebook" width="24" height="24" viewBox="0 0 352 352" fill="var(--color-primary)"><path d="m0 32v288c0 17.5 14.5 32 32 32h288c17.5 0 32-14.5 32-32v-288c0-17.5-14.5-32-32-32h-288c-17.5 0-32 14.5-32 32zm320 0v288h-83v-108h41.5l6-48h-47.5v-31c0-14 3.5-23.5 23.5-23.5h26v-43.5c-4.4-.6-19.8-1.5-37.5-1.5-36.9 0-62 22.2-62 63.5v36h-42v48h42v108h-155v-288z"/></svg></li>
        </a>
        
        
        
        <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fpshegger.github.io%2fposts%2fprocedural-dungeon%2f&amp;source=https%3a%2f%2fpshegger.github.io%2fposts%2fprocedural-dungeon%2f&amp;title=Procedural%20Dungeon%20Generation&amp;summary=Procedural%20Dungeon%20Generation" target="_blank" rel="noopener" aria-label="Share on LinkedIn" class="social-btn linkedin">
          <li><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-linkedin" width="24" height="24" viewBox="0 0 352 352" fill="var(--color-primary)"><path d="M0,40v272c0,21.9,18.1,40,40,40h272c21.9,0,40-18.1,40-40V40c0-21.9-18.1-40-40-40H40C18.1,0,0,18.1,0,40z M312,32 c4.6,0,8,3.4,8,8v272c0,4.6-3.4,8-8,8H40c-4.6,0-8-3.4-8-8V40c0-4.6,3.4-8,8-8H312z M59.5,87c0,15.2,12.3,27.5,27.5,27.5 c15.2,0,27.5-12.3,27.5-27.5c0-15.2-12.3-27.5-27.5-27.5C71.8,59.5,59.5,71.8,59.5,87z M187,157h-1v-21h-45v152h47v-75 c0-19.8,3.9-39,28.5-39c24.2,0,24.5,22.4,24.5,40v74h47v-83.5c0-40.9-8.7-72-56.5-72C208.5,132.5,193.3,145.1,187,157z M64,288h47.5 V136H64V288z"/></svg></li>
        </a>
        
        
        
        <a href="mailto:?subject=pshegger%20-%20Procedural%20Dungeon%20Generation.&amp;body=Procedural%20Dungeon%20Generation%2c%20by%20pshegger%0aProcedural%20generation%20is%20the%20key%20to%20writing%20games%20with%20endless%20content.%20In%20this%20article%20I%20show%20you%20how%20I%20generate%20a%20dungeon%20that%20can%20be%20later%20used%20in%20a%20game.%0a%0ahttps%3a%2f%2fpshegger.github.io%2fposts%2fprocedural-dungeon%2f%0a" target="_blank" class="social-btn email">
          <li><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-mail" width="24" height="24" viewBox="0 0 416 288" fill="var(--color-primary)"><path d="m0 16v256 16h16 384 16v-16-256-16h-16-384-16zm347 16-139 92.5-139-92.5zm-148 125.5 9 5.5 9-5.5 167-111.5v210h-352v-210z"/></svg></li>
        </a>
      </ul>
    </div>
  </section>
  
        

  
  
    <section class="related">
      <h2>See Also</h2>
      <ul class="related-posts">
        
          <li><a href="/posts/grpc-talk/">gRPC for Kotliners</a></li>
        
          <li><a href="/posts/generate-for-me/">@GenerateForMe</a></li>
        
          <li><a href="/posts/kotlin-contracts/">Help Yourself and the Compiler with Contracts</a></li>
        
      </ul>
    </section>
  

        
  <section>
    <h2>Read Next</h2>
    <div class="single-next-previous">
      
        <a class="previous" href="https://pshegger.github.io/posts/hacktivitycon-2021-ctf/">&laquo; h@cktivitycon 2021 CTF</a>
      
      
        <a class="next" href="https://pshegger.github.io/posts/my-first-gamejam/">My First Gamejam &raquo;</a>
      
    </div>
  </section>

      
    </aside>
  </div>
</div>

    </main><footer>
  
  <div class="section footer">
    <p class="footer-copyright">&copy; 2024 &middot; 
      <a href="https://pshegger.github.io/">pshegger</a>
      
    </p>
    
      <div class="footer-socials">
        
<div class="social-links">
  <ul class="social-icons">
    
    
    <li>
      <a href="https://twitter.com/pshegger" target="_blank" rel="noopener" aria-label="Visit Twitter profile" class="social-btn twitter">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-twitter" width="24" height="24" viewBox="0 0 384 312" fill="var(--color-primary)"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5 0-78.8 35.3-78.8 78.8 0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3-6.7 11.6-10.6 25.2-10.6 39.6 0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1 0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4 0-12.6-.4-18.8-1.1 34.9 22.4 76.3 35.4 120.8 35.4 144.9 0 224.1-120 224.1-224.1 0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg>
      </a>
    </li>
    

    
    
    <li>
      <a href="https://github.com/pshegger" target="_blank" rel="noopener" aria-label="Visit Github profile" class="social-btn github">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-github" width="24" height="24" viewBox="0 0 24 24" fill="var(--color-primary)"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
      </a>
    </li>
    

    
    
    <li>
      <a href="https://stackoverflow.com/users/751482/pshegger" target="_blank" rel="noopener" aria-label="Visit Stack Overflow profile" class="social-btn stack-overflow">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-stack-overflow" width="24" height="24" viewBox="0 0 24 24" fill="var(--color-primary)"><path d="M15 21h-10v-2h10v2zm6-11.665l-1.621-9.335-1.993.346 1.62 9.335 1.994-.346zm-5.964 6.937l-9.746-.975-.186 2.016 9.755.879.177-1.92zm.538-2.587l-9.276-2.608-.526 1.954 9.306 2.5.496-1.846zm1.204-2.413l-8.297-4.864-1.029 1.743 8.298 4.865 1.028-1.744zm1.866-1.467l-5.339-7.829-1.672 1.14 5.339 7.829 1.672-1.14zm-2.644 4.195v8h-12v-8h-2v10h16v-10h-2z"/></svg>
      </a>
    </li>
    

    
    

    
    
    <li>
      <a href="mailto:?to=pshegger%40gmail.com" target="_blank" class="social-btn email">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-mail" width="24" height="24" viewBox="0 0 416 288" fill="var(--color-primary)"><path d="m0 16v256 16h16 384 16v-16-256-16h-16-384-16zm347 16-139 92.5-139-92.5zm-148 125.5 9 5.5 9-5.5 167-111.5v210h-352v-210z"/></svg>
      </a>
    </li>
    
  </ul>
</div>
      </div>
    
  </div>
</footer>

  








  
  
    

<script src="https://pshegger.github.io/main.min.js"></script>



  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NKBPT9CS94"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-NKBPT9CS94', { 'anonymize_ip': false });
}
</script>

</body>
</html>
